<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Keyword Search</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        h2 { margin-top: 40px; }
        .highlight { background-color: #ffffcc; }
    </style>
</head>
<body>

<h3>This is for cross-reference purposes only and should not be used as the sole basis for your review.</h3>

<h1>Upload PDF and Search Keywords</h1>

<form method="POST" enctype="multipart/form-data">
    <label>Upload PDF:</label><br>
    <input type="file" name="pdf"><br><br>
    <button type="submit">Search PDF</button>
</form>

<hr>

<h2>Add Positive Keyword</h2>
<form method="POST">
    <input type="text" name="positive_keyword" placeholder="Add positive keyword">
    <button type="submit" name="add_positive">Save</button>
</form>
<ul>
    {% for kw in saved_pos_keywords %}
        <li>{{ kw }}</li>
    {% endfor %}
</ul>

<h2>Add Negative Keyword</h2>
<form method="POST">
    <input type="text" name="negative_keyword" placeholder="Add negative keyword">
    <button type="submit" name="add_negative">Save</button>
</form>
<ul>
    {% for kw in saved_neg_keywords %}
        <li>{{ kw }}</li>
    {% endfor %}
</ul>

{% if message %}
    <p style="color:red;"><strong>{{ message }}</strong></p>
{% endif %}

{% if match_counts %}
    <h2>Match Summary</h2>
    <h3>Positive:</h3>
    <ul>
        {% for kw, count in match_counts['positive'].items() %}
            <li>{{ kw }}: {{ count }}</li>
        {% endfor %}
    </ul>
    <h3>Negative:</h3>
    <ul>
        {% for kw, count in match_counts['negative'].items() %}
            <li>{{ kw }}: {{ count }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% if results %}
    <h2>Matched Results</h2>
    <ul>
    {% for page_num, line, keywords in results %}
        <li><strong>Page {{ page_num }}:</strong> {{ line }} <br>
            <small>Matched: {{ keywords | join(", ") }}</small>
        </li>
    {% endfor %}
    </ul>
{% endif %}

</body>
</html>
