<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF & Image Keyword Search</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        h1 { color: #333; }
        form { margin-bottom: 20px; }
        input[type="text"], input[type="file"] { padding: 5px; margin-right: 10px; }
        button { padding: 5px 10px; }
        .flash { color: red; margin-bottom: 15px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 8px; border: 1px solid #ccc; text-align: left; }
    </style>
</head>
<body>

<h1>PDF & Image Keyword Search</h1>

<!-- Flash messages -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="flash">
      {% for message in messages %}
        <p>{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<!-- Upload Form -->
<form method="POST" enctype="multipart/form-data">
    <input type="file" name="file" required>
    <button type="submit">Search</button>
</form>

<!-- Add Keyword Form -->
<form action="{{ url_for('add_keyword') }}" method="POST">
    <input type="text" name="keyword" placeholder="Enter keyword" required>
    <button type="submit">Add Keyword</button>
</form>

<!-- Keywords List -->
<h2>Saved Keywords</h2>
<table>
    <tr>
        <th>ID</th>
        <th>Keyword</th>
        <th>Action</th>
    </tr>
    {% for kw in keywords %}
    <tr>
        <td>{{ kw.id }}</td>
        <td>{{ kw.word }}</td>
        <td>
            <form action="{{ url_for('delete_keyword', keyword_id=kw.id) }}" method="POST" style="display:inline;">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- Search Results -->
{% if results %}
<h2>Search Results</h2>
<table>
    <tr>
        <th>Keyword</th>
        <th>Page</th>
        <th>Snippet</th>
    </tr>
    {% for r in results %}
    <tr>
        <td>{{ r.keyword }}</td>
        <td>{{ r.page }}</td>
        <td>{{ r.snippet }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}

</body>
</html>
