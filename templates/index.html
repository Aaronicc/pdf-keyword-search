<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Keyword Search</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin-bottom: 20px; }
        .hidden { display: none; }
        .match-highlight { font-weight: bold; color: green; }
    </style>
    <script>
        function toggleVisibility(id) {
            const el = document.getElementById(id);
            el.classList.toggle("hidden");
        }
    </script>
</head>
<body>

    <h2>This is for cross-reference purposes only and should not be used as the sole basis for your review.</h2>

    <!-- Add Keywords Form -->
    <div class="section">
        <h3>Add Keywords</h3>
        <form action="/add_keywords" method="POST">
            <label>Positive Keywords (comma-separated):</label><br>
            <input type="text" name="positive_keywords" style="width: 100%;"><br><br>

            <label>Negative Keywords (comma-separated):</label><br>
            <input type="text" name="negative_keywords" style="width: 100%;"><br><br>

            <button type="submit">üíæ Save Keywords</button>
        </form>
    </div>

    <!-- Toggle Saved Keywords -->
    <div class="section">
        <button onclick="toggleVisibility('savedKeywords')">üîΩ Show/Hide Saved Keywords</button>
        <div id="savedKeywords" class="hidden">
            <h4>Saved Positive Keywords:</h4>
            <ul>
                {% for kw in saved_pos_keywords %}
                    <li>{{ kw }}</li>
                {% endfor %}
            </ul>
            <h4>Saved Negative Keywords:</h4>
            <ul>
                {% for kw in saved_neg_keywords %}
                    <li>{{ kw }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- PDF Upload & Search -->
    <div class="section">
        <h3>Search in PDF</h3>
        <form action="/" method="POST" enctype="multipart/form-data">
            <label>Upload PDF:</label><br>
            <input type="file" name="pdf_file" required><br><br>

            <label>Search Keywords (comma-separated):</label><br>
            <input type="text" name="keywords" style="width: 100%;"><br><br>

            <button type="submit">üîç Search PDF</button>
        </form>
    </div>

    <!-- Results -->
    {% if results %}
        <div class="section">
            <h3>Search Results</h3>
            <ul>
                {% for r in results %}
                    <li>{{ r|safe }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <!-- Summary -->
    {% if counts %}
        <div class="section">
            <h3>Summary of Matches</h3>
            <ul>
                {% for k, v in counts.items() %}
                    <li>{{ k }}: {{ v }} transaction{{ 's' if v != 1 else '' }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

</body>
</html>
