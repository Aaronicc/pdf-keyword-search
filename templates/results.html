<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search Results</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="text-center mb-4">ðŸ”Ž Search Results</h2>

    {% if results %}
      {% for file, matches in results.items() %}
      <div class="card shadow mb-4 rounded-4">
        <div class="card-body">
          <h5 class="card-title">{{ file }}</h5>

          {% if matches %}
          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>Keyword</th>
                  <th>Type</th>
                  <th>Page</th>
                  <th>Snippet</th>
                </tr>
              </thead>
              <tbody>
                {% for m in matches %}
                <tr>
                  <td>
                    {% if m.type == 'positive' %}
                      <span class="badge bg-success">{{ m.keyword }}</span>
                    {% else %}
                      <span class="badge bg-danger">{{ m.keyword }}</span>
                    {% endif %}
                  </td>
                  <td class="text-capitalize">{{ m.type }}</td>
                  <td>
                    {% if m.page %}
                      {{ m.page }}
                    {% else %}
                      -
                    {% endif %}
                  </td>
                  <td><code>{{ m.snippet }}</code></td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% else %}
            <p class="text-muted">No matches found in this file.</p>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    {% else %}
      <div class="alert alert-warning text-center">
        No results found in any uploaded file.
      </div>
    {% endif %}

    <div class="text-center mt-4">
      <a href="/" class="btn btn-secondary rounded-pill">â¬… Back to Upload</a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
